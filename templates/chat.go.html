{{ define "title" }}Chat{{ end }}

{{ define "body" }}
  <style>
    html,
    body {
      background: #cffafe; /* cyan-100 */
      display: flex;
      flex: 1;
      height: 100%;
    }
  </style>

  <main
    class="mx-auto my-5 flex w-11/12 max-w-screen-md flex-col rounded-xl bg-cyan-300 md:w-3/4"
  >
    <h1 class="mb-2 p-2 text-center text-4xl font-semibold">Chat</h1>
    <ul
      class="flex-1 space-y-2 overflow-y-auto px-2"
      id="messages"
      hx-get="/messages"
      hx-trigger="every 2s"
    >
      {{ block "messages" . }}
        {{ range . }}
          <li class="bg-white p-2">{{ .Content }}</li>
        {{ end }}
      {{ end }}
    </ul>

    <form
      class="mt-3 flex w-full space-x-2 rounded-b-xl bg-cyan-600 px-2 py-4"
      hx-post="/messages"
      hx-target="#messages"
      hx-on::after-request="if(event.detail.successful) this.reset()"
    >
      <input
        class="flex-1 p-1"
        name="message"
        placeholder="Enter a message..."
      />
      <button
        type="submit"
        class="rounded border-2 border-white bg-cyan-900 px-2 py-1 font-semibold text-white"
      >
        Send
      </button>
    </form>
  </main>
{{ end }}
